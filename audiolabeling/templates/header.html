{% import '_macros.html' as macros with context %}

<div id="header" style="padding:0.5em">
    <div>
        <!-- Ugly breadcrumb management -->
        {% if request.path == "/" and current_user.is_authenticated %}
        <a href="/projects">Projects</a>
        {% endif %}
        {% if "projects" in request.path or "user" in request.path %}
        <a href="/">Home</a>
        {% endif %}
        {% if current_user.is_authenticated and current_user.role =="admin" and "admin" not in request.path %}
        / <a href="/admin">Admin</a>
        {% endif %}

        {% if "admin" in request.path or "project/" in request.path %}
        <a href="/">Home</a> / <a href="/projects">Projects</a>
        {% endif %}
        <div style="float:right;">
            {% if current_user.is_authenticated %}
            Logged as {{ current_user.username }} - <a href="{{ url_for('users.logout') }}">Logout</a>
            {% else %}
            <a href="{{ url_for('users.login') }}">Login</a> / <a href="{{ url_for('users.register') }}">Signup</a>
            {% endif %}
        </div>
    </div>
    {% if "admin" not in request.path %}
    <div id="messages">
        {{ macros.messages() }}
    </div>
    {% endif %}
    <div style="clear:both"></div>
    <div class="divider"></div>
</div>

